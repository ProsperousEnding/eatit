import{az as e,aA as a,r as s,c as t,f as i,k as l,ag as c,y as o,z as n,A as d,P as r,H as m,a5 as u,u as p,K as g,O as y,a4 as v,L as h,M as f,G as _,J as k}from"./vendors-123bf75d.js";import{_ as C,u as w,g as x}from"./_plugin-vue_export-helper-71d21a94.js";import{E as P,s as H,r as R,c as z}from"./element-plus-93061bb3.js";const L={class:"home"},b={class:"header"},j={class:"search-section"},A={class:"search-bar"},M={class:"content-area"},V={key:0,class:"random-recommend"},q={class:"section-title"},B={class:"recipe-image"},F=["src","alt"],I={class:"recipe-overlay"},K={class:"cooking-time"},T={class:"recipe-info"},D={class:"recipe-tags"},E={class:"category-shortcuts"},G={class:"shortcut-grid"},J=["onClick"],O={class:"today-recommends"},U={class:"section-title"},$={class:"recommend-grid"},N=["onClick"],Q={class:"recommend-image"},S=["src","alt"],W={class:"recommend-overlay"},X={class:"cooking-time"},Y={class:"recommend-info"},Z={class:"recommend-tags"},ee=C({__name:"Home",setup(C){const ee=e(),ae=w(),{homePageRecipe:se,homePageRecommends:te}=a(ae),ie=s(""),le=s(!1),ce=s([]);s([]),t((()=>ce.value.filter((e=>"dish"===e.type)))),t((()=>ce.value.filter((e=>"ingredient"===e.type)))),t((()=>ce.value.filter((e=>"time"===e.type))));const oe=async()=>{try{ae.resetHomePageRecipe(),await ae.getHomePageRecipe()}catch(e){P.error("获取推荐失败，请稍后重试")}},ne=e=>{e?ee.push(`/recipe/${e}`):P.error("菜品ID不存在")};i(ie,(async e=>{e.trim()?(ce.value=await de(e),le.value=!0):le.value=!1}));const de=async e=>{const a=[];return a.push({id:1,text:"红烧肉",type:"dish",category:"肉类"},{id:2,text:"清炒西兰花",type:"dish",category:"素菜"}),a.push({id:3,text:"五花肉",type:"ingredient"},{id:4,text:"西兰花",type:"ingredient"}),(e.includes("分钟")||/\d+/.test(e))&&a.push({id:5,text:"快速料理",type:"time",duration:"15分钟以内"},{id:6,text:"常规烹饪",type:"time",duration:"15-30分钟"}),a.filter((a=>a.text.toLowerCase().includes(e.toLowerCase())||a.category&&a.category.toLowerCase().includes(e.toLowerCase())||a.duration&&a.duration.toLowerCase().includes(e.toLowerCase())))},re=()=>{ie.value.trim()?ee.push({path:"/search",query:{keyword:ie.value.trim()}}):P.warning("请输入搜索内容")},me=[{id:1,name:"早餐",icon:"Coffee"},{id:2,name:"午餐",icon:"Bowl"},{id:3,name:"晚餐",icon:"Food"},{id:4,name:"小食",icon:"Apple"},{id:5,name:"汤品",icon:"Bowl"},{id:6,name:"肉类",icon:"Chicken"},{id:7,name:"素食",icon:"Food"},{id:8,name:"饮品",icon:"Coffee"}],ue=async()=>{try{ae.resetHomePageRecommends(),await ae.getHomePageRecommends()}catch(e){P.error("获取推荐失败，请稍后重试")}};return l((async()=>{await Promise.all([ae.getHomePageRecipe(),ae.getHomePageRecommends()])})),(e,a)=>{const s=c("el-icon"),t=c("el-input"),i=c("el-button"),l=c("el-tag"),C=c("el-card");return o(),n("div",L,[d("div",b,[d("div",j,[d("div",A,[r(t,{modelValue:ie.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ie.value=e),placeholder:"搜索菜品、食材...",class:"search-input",onKeyup:u(re,["enter"]),clearable:""},{prefix:m((()=>[r(s,null,{default:m((()=>[r(p(H))])),_:1})])),_:1},8,["modelValue"])])]),a[2]||(a[2]=d("h1",null,"今天吃什么？",-1)),a[3]||(a[3]=d("p",null,"每天为您精选美味佳肴",-1))]),d("div",M,[p(se)?(o(),n("div",V,[d("div",q,[a[5]||(a[5]=d("h2",null,"今日推荐",-1)),r(i,{text:"",onClick:oe},{default:m((()=>[r(s,null,{default:m((()=>[r(p(R))])),_:1}),a[4]||(a[4]=h(" 换一个 "))])),_:1})]),r(C,{class:"recipe-card",onClick:a[1]||(a[1]=e=>ne(p(se).id))},{default:m((()=>[d("div",B,[d("img",{src:p(x)(p(se).image),alt:p(se).name},null,8,F),d("div",I,[d("span",K,[r(s,null,{default:m((()=>[r(p(z))])),_:1}),h(" "+f(p(se).cookingTime),1)])])]),d("div",T,[d("h3",null,f(p(se).name),1),d("div",D,[r(l,{size:"small"},{default:m((()=>[h(f(p(se).category),1)])),_:1}),r(l,{size:"small",type:"success"},{default:m((()=>[h(f(p(se).cookingMethod),1)])),_:1}),r(l,{size:"small",type:"warning"},{default:m((()=>[h(f(p(se).difficulty),1)])),_:1})])])])),_:1})])):g("",!0),d("div",E,[d("div",G,[(o(),n(y,null,v(me,(e=>d("div",{key:e.id,class:"shortcut-item",onClick:a=>(e=>{ee.push({path:"/category",query:{id:e.id,name:e.name}})})(e)},[r(s,{class:"shortcut-icon"},{default:m((()=>[(o(),_(k(e.icon)))])),_:2},1024),d("span",null,f(e.name),1)],8,J))),64))])]),d("div",O,[d("div",U,[a[7]||(a[7]=d("h2",null,"精选推荐",-1)),r(i,{text:"",onClick:ue},{default:m((()=>[r(s,null,{default:m((()=>[r(p(R))])),_:1}),a[6]||(a[6]=h(" 换一批 "))])),_:1})]),d("div",$,[(o(!0),n(y,null,v(p(te),(e=>(o(),n("div",{key:e.id,class:"recommend-item",onClick:a=>ne(e.id)},[d("div",Q,[d("img",{src:p(x)(e.image),alt:e.name},null,8,S),d("div",W,[d("span",X,[r(s,null,{default:m((()=>[r(p(z))])),_:1}),h(" "+f(e.cookingTime),1)])])]),d("div",Y,[d("h3",null,f(e.name),1),d("div",Z,[r(l,{size:"small"},{default:m((()=>[h(f(e.category),1)])),_:2},1024),r(l,{size:"small",type:"success"},{default:m((()=>[h(f(e.cookingMethod),1)])),_:2},1024)])])],8,N)))),128))])])])])}}},[["__scopeId","data-v-420119c8"]]);export{ee as default};
