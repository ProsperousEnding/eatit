import{aB as e,az as s,aA as a,r as l,f as i,k as t,S as n,ag as c,u as r,y as d,z as o,P as u,H as p,A as m,K as g,M as h,G as f,L as v,O as y,a4 as _}from"./vendors-123bf75d.js";import{_ as k,u as b}from"./_plugin-vue_export-helper-81216463.js";import{E as $,c as w,f as z,a as R,d as j,w as C}from"./element-plus-f93db08e.js";const I={key:0,class:"recipe-detail"},P={key:0,class:"nutrition-info"},L={class:"ingredient-quantity"},M={class:"section-header"},T={class:"total-time"},x={class:"time-value"},H={class:"step-content"},V={class:"step-number"},q=["innerHTML"],A={class:"action-buttons"},B={class:"mobile-pairings-content"},D={class:"current-dish-section"},E={class:"current-dish-card"},F={class:"current-dish-info"},G={class:"current-dish-tags"},K={class:"pairing-reason-section"},O={class:"reason-title"},S={class:"reason-grid"},U={class:"reason-item"},J={class:"reason-item"},N={class:"reason-item"},Q={class:"recommended-dishes-section"},W={class:"dishes-grid"},X=["onClick"],Y={class:"dish-image-wrapper"},Z={class:"dish-content"},ee={class:"dish-meta"},se={class:"dish-tags"},ae={class:"cooking-time"},le={class:"pairing-desc"},ie={class:"mobile-dialog-footer"},te=k({__name:"RecipeDetail",setup(k){const C=e(),te=s(),ne=b(),{currentRecipe:ce,recommendedPairings:re}=a(ne),de=l(!1);l([{title:"营养搭配小贴士",content:"荤素搭配不仅可以让饮食更加美味，还能确保营养均衡。主菜提供优质蛋白质，蔬菜补充维生素和膳食纤维。"},{title:"健康饮食建议",content:"建议一餐中荤菜和素菜的比例为3:7，这样既能享受美味，又不会摄入过多油脂。"}]);const oe=async e=>{try{if(!e)return;await ne.getRecipeById(parseInt(e)),await ne.getRecommendedPairings(parseInt(e))}catch(s){$.error(s.message||"获取菜品详情失败")}};i((()=>C.params.id),(async e=>{e&&await oe(e)}));const ue=async()=>{de.value=!0},pe=async()=>{try{const e=C.params.id;if(!e)return;await ne.getRecommendedPairings(parseInt(e))}catch(e){$.error("获取搭配推荐失败")}};t((async()=>{const e=C.params.id;e&&await oe(e)})),n((()=>{ne.currentRecipe=null,ne.recommendedPairings=[]}));const me=e=>0===e?"primary":e===ce.value.steps.length-1?"success":"normal";return(e,s)=>{const a=c("el-image"),l=c("el-descriptions-item"),i=c("el-descriptions"),t=c("el-card"),n=c("el-tag"),k=c("el-icon"),b=c("el-timeline-item"),$=c("el-timeline"),C=c("el-button"),ne=c("el-divider"),oe=c("el-dialog");return r(ce)?(d(),o("div",I,[u(t,{class:"main-info"},{default:p((()=>[u(a,{src:r(ce).image||"/default-food.jpg",fit:"cover",class:"recipe-image"},null,8,["src"]),m("h1",null,h(r(ce).name),1),r(ce).nutrition?(d(),o("div",P,[u(i,{column:3,border:""},{default:p((()=>[r(ce).nutrition.calories?(d(),f(l,{key:0,label:"热量"},{default:p((()=>[v(h(r(ce).nutrition.calories),1)])),_:1})):g("",!0),r(ce).nutrition.protein?(d(),f(l,{key:1,label:"蛋白质"},{default:p((()=>[v(h(r(ce).nutrition.protein),1)])),_:1})):g("",!0),r(ce).nutrition.fat?(d(),f(l,{key:2,label:"脂肪"},{default:p((()=>[v(h(r(ce).nutrition.fat),1)])),_:1})):g("",!0),r(ce).nutrition.carbs?(d(),f(l,{key:3,label:"碳水"},{default:p((()=>[v(h(r(ce).nutrition.carbs),1)])),_:1})):g("",!0)])),_:1})])):g("",!0)])),_:1}),u(t,{class:"ingredients-section"},{header:p((()=>s[2]||(s[2]=[m("h3",null,"食材清单",-1)]))),default:p((()=>[(d(!0),o(y,null,_(r(ce).ingredients,(e=>(d(),f(n,{key:e,class:"ingredient-tag"},{default:p((()=>[e.includes("克")||e.includes("g")||e.includes("ml")||e.includes("个")||e.includes("片")?(d(),o(y,{key:0},[m("span",L,h(e.match(/\d+(\.\d+)?[克gml个片]/)[0]),1),v(" "+h(e.replace(/\d+(\.\d+)?[克gml个片]/,"")),1)],64)):(d(),o(y,{key:1},[v(h(e),1)],64))])),_:2},1024)))),128))])),_:1}),u(t,{class:"steps-section"},{header:p((()=>[m("div",M,[s[4]||(s[4]=m("h3",null,"烹饪步骤",-1)),m("span",T,[u(k,null,{default:p((()=>[u(r(w))])),_:1}),s[3]||(s[3]=v(" 总耗时：")),m("span",x,h(r(ce).cookingTime),1)])])])),default:p((()=>[u($,null,{default:p((()=>[(d(!0),o(y,null,_(r(ce).steps,((e,s)=>(d(),f(b,{key:s,type:me(s),hollow:s===r(ce).steps.length-1,class:"step-item"},{default:p((()=>{return[m("div",H,[m("div",V,h(s+1),1),m("div",{class:"step-text",innerHTML:(a=e,a=(a=(a=(a=(a=(a=(a=a.replace(/(\d+(?:\.\d+)?)\s*(分钟|秒钟|小时|分|秒|h|min|s)/g,'<span class="highlight-time">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(厘米|毫米|cm|mm|米|m)/g,'<span class="highlight-length">$1$2</span>')).replace(/(\d+)\s*(度|℃|°C|°F)/g,'<span class="highlight-temp">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(克|千克|g|kg|公斤|斤|两)/g,'<span class="highlight-weight">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(ml|毫升|升|L|l|dl|分升)/g,'<span class="highlight-volume">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(茶匙|勺|汤匙|碗|杯|盘|把|撮|勺子|匙|大勺|小勺|cup|tbsp|tsp)/g,'<span class="highlight-measure">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(个|只|块|片|颗|粒|根|条|串|包|瓣|节|头|朵|丝|段|张|捆|把|束)/g,'<span class="highlight-quantity">$1$2</span>'))},null,8,q),g("",!0)])];var a})),_:2},1032,["type","hollow"])))),128))])),_:1})])),_:1}),m("div",A,[u(C,{type:"primary",size:"large",onClick:ue,class:"pairing-btn"},{default:p((()=>s[5]||(s[5]=[v(" 查看最佳搭配 ")]))),_:1})]),u(oe,{modelValue:de.value,"onUpdate:modelValue":s[1]||(s[1]=e=>de.value=e),title:`${r(ce).name}的最佳搭配`,width:"90%",class:"pairings-dialog mobile-dialog",fullscreen:!0},{footer:p((()=>[m("div",ie,[u(C,{onClick:s[0]||(s[0]=e=>de.value=!1),block:""},{default:p((()=>s[14]||(s[14]=[v("关闭")]))),_:1}),u(C,{type:"primary",onClick:pe,block:""},{default:p((()=>s[15]||(s[15]=[v("换一批搭配")]))),_:1})])])),default:p((()=>[m("div",B,[m("div",D,[m("div",E,[u(a,{src:r(ce).image||"/default-food.jpg",class:"current-dish-image"},null,8,["src"]),m("div",F,[m("h3",null,h(r(ce).name),1),m("div",G,[u(n,{size:"small",effect:"plain",type:"danger"},{default:p((()=>[v(h(r(ce).taste),1)])),_:1}),u(n,{size:"small",effect:"plain",type:"warning"},{default:p((()=>[v(h(r(ce).cookingMethod),1)])),_:1})])])])]),m("div",K,[m("div",O,[u(ne,null,{default:p((()=>s[6]||(s[6]=[v("搭配理由")]))),_:1})]),m("div",S,[m("div",U,[u(k,{class:"reason-icon"},{default:p((()=>[u(r(z))])),_:1}),s[7]||(s[7]=m("h5",null,"营养均衡",-1)),s[8]||(s[8]=m("p",null,"合理搭配荤素",-1))]),m("div",J,[u(k,{class:"reason-icon"},{default:p((()=>[u(r(R))])),_:1}),s[9]||(s[9]=m("h5",null,"口感互补",-1)),s[10]||(s[10]=m("p",null,"提升饮食体验",-1))]),m("div",N,[u(k,{class:"reason-icon"},{default:p((()=>[u(r(j))])),_:1}),s[11]||(s[11]=m("h5",null,"健康饮食",-1)),s[12]||(s[12]=m("p",null,"注重荤素比例",-1))])])]),m("div",Q,[s[13]||(s[13]=m("div",{class:"section-title"},[m("h4",null,"推荐搭配")],-1)),m("div",W,[(d(!0),o(y,null,_(r(re),(e=>(d(),o("div",{key:e.id,class:"dish-item",onClick:s=>{return a=e.id,te.push({path:`/recipe/${a}`}),void(de.value=!1);var a}},[m("div",Y,[u(a,{src:e.image||"/default-food.jpg",fit:"cover",class:"dish-thumb"},null,8,["src"])]),m("div",Z,[m("h5",null,h(e.name),1),m("div",ee,[m("div",se,[u(n,{size:"small",effect:"plain"},{default:p((()=>[v(h(e.category),1)])),_:2},1024),u(n,{size:"small",effect:"plain",type:"info"},{default:p((()=>[v(h(e.taste),1)])),_:2},1024)]),m("span",ae,[u(k,null,{default:p((()=>[u(r(w))])),_:1}),v(" "+h(e.cookingTime),1)])]),m("p",le,h(e.pairingReason),1)])],8,X)))),128))])])])])),_:1},8,["modelValue","title"])])):g("",!0)}}},[["__scopeId","data-v-7a857005"]]);export{te as default};
