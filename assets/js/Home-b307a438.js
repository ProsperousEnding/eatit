import{az as e,aA as a,r as s,c as t,f as l,k as i,ag as c,y as o,z as n,A as d,P as r,H as u,a5 as m,u as p,K as v,O as g,a4 as y,L as h,M as f,G as _,J as k}from"./vendors-123bf75d.js";import{_ as C,u as w}from"./_plugin-vue_export-helper-81216463.js";import{E as x,s as P,r as z,c as L}from"./element-plus-f93db08e.js";const R={class:"home"},H={class:"header"},M={class:"search-section"},b={class:"search-bar"},j={class:"content-area"},A={key:0,class:"random-recommend"},V={class:"section-title"},q={class:"recipe-image"},B=["src","alt"],F={class:"recipe-overlay"},K={class:"cooking-time"},T={class:"recipe-info"},E={class:"recipe-tags"},G={class:"category-shortcuts"},I={class:"shortcut-grid"},J=["onClick"],O={class:"today-recommends"},U={class:"recommend-grid"},$=["onClick"],D={class:"recommend-image"},N=["src","alt"],Q={class:"recommend-overlay"},S={class:"cooking-time"},W={class:"recommend-info"},X={class:"recommend-tags"},Y={key:1,class:"load-more"},Z=C({__name:"Home",setup(C){const Z=e(),ee=w(),{homePageRecipe:ae,homePageRecommends:se}=a(ee),te=s(""),le=s(!1),ie=s([]);s([]);const ce=s(!0),oe=s(1);t((()=>ie.value.filter((e=>"dish"===e.type)))),t((()=>ie.value.filter((e=>"ingredient"===e.type)))),t((()=>ie.value.filter((e=>"time"===e.type))));const ne=async()=>{try{ee.resetHomePageRecipe(),await ee.getHomePageRecipe()}catch(e){x.error("获取推荐失败，请稍后重试")}},de=e=>{Z.push(`/recipe/${e}`)};l(te,(async e=>{e.trim()?(ie.value=await re(e),le.value=!0):le.value=!1}));const re=async e=>{const a=[];return a.push({id:1,text:"红烧肉",type:"dish",category:"肉类"},{id:2,text:"清炒西兰花",type:"dish",category:"素菜"}),a.push({id:3,text:"五花肉",type:"ingredient"},{id:4,text:"西兰花",type:"ingredient"}),(e.includes("分钟")||/\d+/.test(e))&&a.push({id:5,text:"快速料理",type:"time",duration:"15分钟以内"},{id:6,text:"常规烹饪",type:"time",duration:"15-30分钟"}),a.filter((a=>a.text.toLowerCase().includes(e.toLowerCase())||a.category&&a.category.toLowerCase().includes(e.toLowerCase())||a.duration&&a.duration.toLowerCase().includes(e.toLowerCase())))},ue=()=>{te.value.trim()?Z.push({path:"/search",query:{keyword:te.value.trim()}}):x.warning("请输入搜索内容")},me=[{id:1,name:"早餐",icon:"Coffee"},{id:2,name:"午餐",icon:"Bowl"},{id:3,name:"晚餐",icon:"Food"},{id:4,name:"小食",icon:"Apple"},{id:5,name:"汤品",icon:"Bowl"},{id:6,name:"肉类",icon:"Chicken"},{id:7,name:"素食",icon:"Food"},{id:8,name:"饮品",icon:"Coffee"}],pe=async()=>{try{oe.value++,await ee.getMoreRecommends(oe.value),ce.value=se.value.length<30}catch(e){x.error("加载更多失败，请稍后重试"),oe.value--}};return i((async()=>{await Promise.all([ee.getHomePageRecipe(),ee.getHomePageRecommends()])})),(e,a)=>{const s=c("el-icon"),t=c("el-input"),l=c("el-button"),i=c("el-tag"),C=c("el-card");return o(),n("div",R,[d("div",H,[d("div",M,[d("div",b,[r(t,{modelValue:te.value,"onUpdate:modelValue":a[0]||(a[0]=e=>te.value=e),placeholder:"搜索菜品、食材...",class:"search-input",onKeyup:m(ue,["enter"]),clearable:""},{prefix:u((()=>[r(s,null,{default:u((()=>[r(p(P))])),_:1})])),_:1},8,["modelValue"])])]),a[2]||(a[2]=d("h1",null,"今天吃什么？",-1)),a[3]||(a[3]=d("p",null,"每天为您精选美味佳肴",-1))]),d("div",j,[p(ae)?(o(),n("div",A,[d("div",V,[a[5]||(a[5]=d("h2",null,"今日推荐",-1)),r(l,{text:"",onClick:ne},{default:u((()=>[r(s,null,{default:u((()=>[r(p(z))])),_:1}),a[4]||(a[4]=h(" 换一个 "))])),_:1})]),r(C,{class:"recipe-card",onClick:a[1]||(a[1]=e=>de(p(ae).id))},{default:u((()=>[d("div",q,[d("img",{src:p(ae).image,alt:p(ae).name},null,8,B),d("div",F,[d("span",K,[r(s,null,{default:u((()=>[r(p(L))])),_:1}),h(" "+f(p(ae).cookingTime),1)])])]),d("div",T,[d("h3",null,f(p(ae).name),1),d("div",E,[r(i,{size:"small"},{default:u((()=>[h(f(p(ae).category),1)])),_:1}),r(i,{size:"small",type:"success"},{default:u((()=>[h(f(p(ae).cookingMethod),1)])),_:1}),r(i,{size:"small",type:"warning"},{default:u((()=>[h(f(p(ae).difficulty),1)])),_:1})])])])),_:1})])):v("",!0),d("div",G,[d("div",I,[(o(),n(g,null,y(me,(e=>d("div",{key:e.id,class:"shortcut-item",onClick:a=>(e=>{Z.push({path:"/category",query:{id:e.id,name:e.name}})})(e)},[r(s,{class:"shortcut-icon"},{default:u((()=>[(o(),_(k(e.icon)))])),_:2},1024),d("span",null,f(e.name),1)],8,J))),64))])]),d("div",O,[a[6]||(a[6]=d("div",{class:"section-title"},[d("h2",null,"精选推荐")],-1)),d("div",U,[(o(!0),n(g,null,y(p(se),(e=>(o(),n("div",{key:e.id,class:"recommend-item",onClick:a=>de(e.id)},[d("div",D,[d("img",{src:e.image,alt:e.name},null,8,N),d("div",Q,[d("span",S,[r(s,null,{default:u((()=>[r(p(L))])),_:1}),h(" "+f(e.cookingTime),1)])])]),d("div",W,[d("h3",null,f(e.name),1),d("div",X,[r(i,{size:"small"},{default:u((()=>[h(f(e.category),1)])),_:2},1024),r(i,{size:"small",type:"success"},{default:u((()=>[h(f(e.cookingMethod),1)])),_:2},1024)])])],8,$)))),128))])]),ce.value?(o(),n("div",Y,[r(l,{text:"",onClick:pe},{default:u((()=>a[7]||(a[7]=[h("加载更多")]))),_:1})])):v("",!0)])])}}},[["__scopeId","data-v-2267e123"]]);export{Z as default};
