import{az as e,aA as a,r as s,c as t,f as l,k as i,ag as c,y as o,z as n,A as d,P as r,H as u,a5 as m,u as p,K as g,O as v,a4 as y,L as h,M as f,G as _,J as k}from"./vendors-123bf75d.js";import{_ as C,u as w,g as x}from"./_plugin-vue_export-helper-2aea90e9.js";import{E as P,s as z,r as L,c as R}from"./element-plus-f93db08e.js";const H={class:"home"},M={class:"header"},b={class:"search-section"},j={class:"search-bar"},A={class:"content-area"},V={key:0,class:"random-recommend"},q={class:"section-title"},B={class:"recipe-image"},F=["src","alt"],I={class:"recipe-overlay"},K={class:"cooking-time"},T={class:"recipe-info"},D={class:"recipe-tags"},E={class:"category-shortcuts"},G={class:"shortcut-grid"},J=["onClick"],O={class:"today-recommends"},U={class:"recommend-grid"},$=["onClick"],N={class:"recommend-image"},Q=["src","alt"],S={class:"recommend-overlay"},W={class:"cooking-time"},X={class:"recommend-info"},Y={class:"recommend-tags"},Z={key:1,class:"load-more"},ee=C({__name:"Home",setup(C){const ee=e(),ae=w(),{homePageRecipe:se,homePageRecommends:te}=a(ae),le=s(""),ie=s(!1),ce=s([]);s([]);const oe=s(!0),ne=s(1);t((()=>ce.value.filter((e=>"dish"===e.type)))),t((()=>ce.value.filter((e=>"ingredient"===e.type)))),t((()=>ce.value.filter((e=>"time"===e.type))));const de=async()=>{try{ae.resetHomePageRecipe(),await ae.getHomePageRecipe()}catch(e){P.error("获取推荐失败，请稍后重试")}},re=e=>{e?ee.push(`/recipe/${e}`):P.error("菜品ID不存在")};l(le,(async e=>{e.trim()?(ce.value=await ue(e),ie.value=!0):ie.value=!1}));const ue=async e=>{const a=[];return a.push({id:1,text:"红烧肉",type:"dish",category:"肉类"},{id:2,text:"清炒西兰花",type:"dish",category:"素菜"}),a.push({id:3,text:"五花肉",type:"ingredient"},{id:4,text:"西兰花",type:"ingredient"}),(e.includes("分钟")||/\d+/.test(e))&&a.push({id:5,text:"快速料理",type:"time",duration:"15分钟以内"},{id:6,text:"常规烹饪",type:"time",duration:"15-30分钟"}),a.filter((a=>a.text.toLowerCase().includes(e.toLowerCase())||a.category&&a.category.toLowerCase().includes(e.toLowerCase())||a.duration&&a.duration.toLowerCase().includes(e.toLowerCase())))},me=()=>{le.value.trim()?ee.push({path:"/search",query:{keyword:le.value.trim()}}):P.warning("请输入搜索内容")},pe=[{id:1,name:"早餐",icon:"Coffee"},{id:2,name:"午餐",icon:"Bowl"},{id:3,name:"晚餐",icon:"Food"},{id:4,name:"小食",icon:"Apple"},{id:5,name:"汤品",icon:"Bowl"},{id:6,name:"肉类",icon:"Chicken"},{id:7,name:"素食",icon:"Food"},{id:8,name:"饮品",icon:"Coffee"}],ge=async()=>{try{ne.value++,await ae.getMoreRecommends(ne.value),oe.value=te.value.length<30}catch(e){P.error("加载更多失败，请稍后重试"),ne.value--}};return i((async()=>{await Promise.all([ae.getHomePageRecipe(),ae.getHomePageRecommends()])})),(e,a)=>{const s=c("el-icon"),t=c("el-input"),l=c("el-button"),i=c("el-tag"),C=c("el-card");return o(),n("div",H,[d("div",M,[d("div",b,[d("div",j,[r(t,{modelValue:le.value,"onUpdate:modelValue":a[0]||(a[0]=e=>le.value=e),placeholder:"搜索菜品、食材...",class:"search-input",onKeyup:m(me,["enter"]),clearable:""},{prefix:u((()=>[r(s,null,{default:u((()=>[r(p(z))])),_:1})])),_:1},8,["modelValue"])])]),a[2]||(a[2]=d("h1",null,"今天吃什么？",-1)),a[3]||(a[3]=d("p",null,"每天为您精选美味佳肴",-1))]),d("div",A,[p(se)?(o(),n("div",V,[d("div",q,[a[5]||(a[5]=d("h2",null,"今日推荐",-1)),r(l,{text:"",onClick:de},{default:u((()=>[r(s,null,{default:u((()=>[r(p(L))])),_:1}),a[4]||(a[4]=h(" 换一个 "))])),_:1})]),r(C,{class:"recipe-card",onClick:a[1]||(a[1]=e=>re(p(se).id))},{default:u((()=>[d("div",B,[d("img",{src:p(x)(p(se).image),alt:p(se).name},null,8,F),d("div",I,[d("span",K,[r(s,null,{default:u((()=>[r(p(R))])),_:1}),h(" "+f(p(se).cookingTime),1)])])]),d("div",T,[d("h3",null,f(p(se).name),1),d("div",D,[r(i,{size:"small"},{default:u((()=>[h(f(p(se).category),1)])),_:1}),r(i,{size:"small",type:"success"},{default:u((()=>[h(f(p(se).cookingMethod),1)])),_:1}),r(i,{size:"small",type:"warning"},{default:u((()=>[h(f(p(se).difficulty),1)])),_:1})])])])),_:1})])):g("",!0),d("div",E,[d("div",G,[(o(),n(v,null,y(pe,(e=>d("div",{key:e.id,class:"shortcut-item",onClick:a=>(e=>{ee.push({path:"/category",query:{id:e.id,name:e.name}})})(e)},[r(s,{class:"shortcut-icon"},{default:u((()=>[(o(),_(k(e.icon)))])),_:2},1024),d("span",null,f(e.name),1)],8,J))),64))])]),d("div",O,[a[6]||(a[6]=d("div",{class:"section-title"},[d("h2",null,"精选推荐")],-1)),d("div",U,[(o(!0),n(v,null,y(p(te),(e=>(o(),n("div",{key:e.id,class:"recommend-item",onClick:a=>re(e.id)},[d("div",N,[d("img",{src:p(x)(e.image),alt:e.name},null,8,Q),d("div",S,[d("span",W,[r(s,null,{default:u((()=>[r(p(R))])),_:1}),h(" "+f(e.cookingTime),1)])])]),d("div",X,[d("h3",null,f(e.name),1),d("div",Y,[r(i,{size:"small"},{default:u((()=>[h(f(e.category),1)])),_:2},1024),r(i,{size:"small",type:"success"},{default:u((()=>[h(f(e.cookingMethod),1)])),_:2},1024)])])],8,$)))),128))])]),oe.value?(o(),n("div",Z,[r(l,{text:"",onClick:ge},{default:u((()=>a[7]||(a[7]=[h("加载更多")]))),_:1})])):g("",!0)])])}}},[["__scopeId","data-v-d7787dcc"]]);export{ee as default};
