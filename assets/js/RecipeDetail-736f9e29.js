import{aB as e,az as s,aA as a,r as l,f as i,k as t,S as n,ag as c,y as r,z as d,u as o,O as u,P as p,H as m,A as g,G as h,M as f,L as v,K as y,a4 as _}from"./vendors-123bf75d.js";import{_ as k,u as b,g as $}from"./_plugin-vue_export-helper-71d21a94.js";import{E as w,c as z,f as R,a as C,d as I,w as P}from"./element-plus-93061bb3.js";const L={class:"recipe-detail"},M={key:0,class:"nutrition-info"},T={class:"ingredient-quantity"},j={class:"section-header"},x={class:"total-time"},H={class:"time-value"},V={class:"step-content"},q={class:"step-number"},A=["innerHTML"],B={class:"action-buttons"},D={class:"mobile-pairings-content"},E={class:"current-dish-section"},F={class:"current-dish-card"},G={class:"current-dish-info"},K={class:"current-dish-tags"},O={class:"pairing-reason-section"},S={class:"reason-title"},U={class:"reason-grid"},J={class:"reason-item"},N={class:"reason-item"},Q={class:"reason-item"},W={class:"recommended-dishes-section"},X={class:"dishes-grid"},Y=["onClick"],Z={class:"dish-image-wrapper"},ee={class:"dish-content"},se={class:"dish-meta"},ae={class:"dish-tags"},le={class:"cooking-time"},ie={class:"pairing-desc"},te={class:"mobile-dialog-footer"},ne=k({__name:"RecipeDetail",setup(k){const P=e(),ne=s(),ce=b(),{currentRecipe:re,recommendedPairings:de}=a(ce),oe=l(!1);l([{title:"营养搭配小贴士",content:"荤素搭配不仅可以让饮食更加美味，还能确保营养均衡。主菜提供优质蛋白质，蔬菜补充维生素和膳食纤维。"},{title:"健康饮食建议",content:"建议一餐中荤菜和素菜的比例为3:7，这样既能享受美味，又不会摄入过多油脂。"}]);const ue=async e=>{try{if(!e)return;await ce.getRecipeById(parseInt(e)),await ce.getRecommendedPairings(parseInt(e))}catch(s){w.error(s.message||"获取菜品详情失败")}};i((()=>P.params.id),(async e=>{e&&await ue(e)}));const pe=async()=>{oe.value=!0},me=async()=>{try{const e=P.params.id;if(!e)return;await ce.getRecommendedPairings(parseInt(e))}catch(e){w.error("获取搭配推荐失败")}};t((async()=>{const e=P.params.id;e&&await ue(e)})),n((()=>{ce.currentRecipe=null,ce.recommendedPairings=[]}));const ge=e=>0===e?"primary":e===re.value.steps.length-1?"success":"normal";return(e,s)=>{const a=c("el-image"),l=c("el-descriptions-item"),i=c("el-descriptions"),t=c("el-card"),n=c("el-tag"),k=c("el-icon"),b=c("el-timeline-item"),w=c("el-timeline"),P=c("el-button"),ce=c("el-divider"),ue=c("el-dialog"),he=c("el-empty");return r(),d("div",L,[o(re)?(r(),d(u,{key:0},[p(t,{class:"main-info"},{default:m((()=>[p(a,{src:o($)(o(re).image),fit:"cover",class:"recipe-image"},null,8,["src"]),g("h1",null,f(o(re).name),1),o(re).nutrition?(r(),d("div",M,[p(i,{column:3,border:""},{default:m((()=>[o(re).nutrition.calories?(r(),h(l,{key:0,label:"热量"},{default:m((()=>[v(f(o(re).nutrition.calories),1)])),_:1})):y("",!0),o(re).nutrition.protein?(r(),h(l,{key:1,label:"蛋白质"},{default:m((()=>[v(f(o(re).nutrition.protein),1)])),_:1})):y("",!0),o(re).nutrition.fat?(r(),h(l,{key:2,label:"脂肪"},{default:m((()=>[v(f(o(re).nutrition.fat),1)])),_:1})):y("",!0),o(re).nutrition.carbs?(r(),h(l,{key:3,label:"碳水"},{default:m((()=>[v(f(o(re).nutrition.carbs),1)])),_:1})):y("",!0)])),_:1})])):y("",!0)])),_:1}),p(t,{class:"ingredients-section"},{header:m((()=>s[2]||(s[2]=[g("h3",null,"食材清单",-1)]))),default:m((()=>[(r(!0),d(u,null,_(o(re).ingredients,(e=>(r(),h(n,{key:e,class:"ingredient-tag"},{default:m((()=>{var s;return[e.includes("克")||e.includes("g")||e.includes("ml")||e.includes("个")||e.includes("片")?(r(),d(u,{key:0},[g("span",T,f((null==(s=e.match(/\d+(\.\d+)?[克gml个片]/))?void 0:s.at(0))||e),1),v(" "+f(e.replace(/\d+(\.\d+)?[克gml个片]/,"")),1)],64)):(r(),d(u,{key:1},[v(f(e),1)],64))]})),_:2},1024)))),128))])),_:1}),p(t,{class:"steps-section"},{header:m((()=>[g("div",j,[s[4]||(s[4]=g("h3",null,"烹饪步骤",-1)),g("span",x,[p(k,null,{default:m((()=>[p(o(z))])),_:1}),s[3]||(s[3]=v(" 总耗时：")),g("span",H,f(o(re).cookingTime),1)])])])),default:m((()=>[p(w,null,{default:m((()=>[(r(!0),d(u,null,_(o(re).steps,((e,s)=>(r(),h(b,{key:s,type:ge(s),hollow:s===o(re).steps.length-1,class:"step-item"},{default:m((()=>{return[g("div",V,[g("div",q,f(s+1),1),g("div",{class:"step-text",innerHTML:(a=e,a=(a=(a=(a=(a=(a=(a=a.replace(/(\d+(?:\.\d+)?)\s*(分钟|秒钟|小时|分|秒|h|min|s)/g,'<span class="highlight-time">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(厘米|毫米|cm|mm|米|m)/g,'<span class="highlight-length">$1$2</span>')).replace(/(\d+)\s*(度|℃|°C|°F)/g,'<span class="highlight-temp">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(克|千克|g|kg|公斤|斤|两)/g,'<span class="highlight-weight">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(ml|毫升|升|L|l|dl|分升)/g,'<span class="highlight-volume">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(茶匙|勺|汤匙|碗|杯|盘|把|撮|勺子|匙|大勺|小勺|cup|tbsp|tsp)/g,'<span class="highlight-measure">$1$2</span>')).replace(/(\d+(?:\.\d+)?)\s*(个|只|块|片|颗|粒|根|条|串|包|瓣|节|头|朵|丝|段|张|捆|把|束)/g,'<span class="highlight-quantity">$1$2</span>'))},null,8,A),y("",!0)])];var a})),_:2},1032,["type","hollow"])))),128))])),_:1})])),_:1}),g("div",B,[p(P,{type:"primary",size:"large",onClick:pe,class:"pairing-btn"},{default:m((()=>s[5]||(s[5]=[v(" 查看最佳搭配 ")]))),_:1})]),p(ue,{modelValue:oe.value,"onUpdate:modelValue":s[1]||(s[1]=e=>oe.value=e),title:`${o(re).name}的最佳搭配`,width:"90%",class:"pairings-dialog mobile-dialog",fullscreen:!0},{footer:m((()=>[g("div",te,[p(P,{onClick:s[0]||(s[0]=e=>oe.value=!1),block:""},{default:m((()=>s[14]||(s[14]=[v("关闭")]))),_:1}),p(P,{type:"primary",onClick:me,block:""},{default:m((()=>s[15]||(s[15]=[v("换一批搭配")]))),_:1})])])),default:m((()=>[g("div",D,[g("div",E,[g("div",F,[p(a,{src:o($)(o(re).image),class:"current-dish-image"},null,8,["src"]),g("div",G,[g("h3",null,f(o(re).name),1),g("div",K,[p(n,{size:"small",effect:"plain",type:"danger"},{default:m((()=>[v(f(o(re).taste),1)])),_:1}),p(n,{size:"small",effect:"plain",type:"warning"},{default:m((()=>[v(f(o(re).cookingMethod),1)])),_:1})])])])]),g("div",O,[g("div",S,[p(ce,null,{default:m((()=>s[6]||(s[6]=[v("搭配理由")]))),_:1})]),g("div",U,[g("div",J,[p(k,{class:"reason-icon"},{default:m((()=>[p(o(R))])),_:1}),s[7]||(s[7]=g("h5",null,"营养均衡",-1)),s[8]||(s[8]=g("p",null,"合理搭配荤素",-1))]),g("div",N,[p(k,{class:"reason-icon"},{default:m((()=>[p(o(C))])),_:1}),s[9]||(s[9]=g("h5",null,"口感互补",-1)),s[10]||(s[10]=g("p",null,"提升饮食体验",-1))]),g("div",Q,[p(k,{class:"reason-icon"},{default:m((()=>[p(o(I))])),_:1}),s[11]||(s[11]=g("h5",null,"健康饮食",-1)),s[12]||(s[12]=g("p",null,"注重荤素比例",-1))])])]),g("div",W,[s[13]||(s[13]=g("div",{class:"section-title"},[g("h4",null,"推荐搭配")],-1)),g("div",X,[(r(!0),d(u,null,_(o(de),(e=>(r(),d("div",{key:e.id,class:"dish-item",onClick:s=>{return a=e.id,ne.push({path:`/recipe/${a}`,replace:!0}),void(oe.value=!1);var a}},[g("div",Z,[p(a,{src:o($)(e.image),fit:"cover",class:"dish-thumb"},null,8,["src"])]),g("div",ee,[g("h5",null,f(e.name),1),g("div",se,[g("div",ae,[p(n,{size:"small",effect:"plain"},{default:m((()=>[v(f(e.category),1)])),_:2},1024),p(n,{size:"small",effect:"plain",type:"info"},{default:m((()=>[v(f(e.taste),1)])),_:2},1024)]),g("span",le,[p(k,null,{default:m((()=>[p(o(z))])),_:1}),v(" "+f(e.cookingTime),1)])]),g("p",ie,f(e.pairingReason),1)])],8,Y)))),128))])])])])),_:1},8,["modelValue","title"])],64)):(r(),h(he,{key:1,description:"未找到菜品信息"}))])}}},[["__scopeId","data-v-898c9f13"]]);export{ne as default};
