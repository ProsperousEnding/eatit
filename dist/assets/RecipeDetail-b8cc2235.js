import{aB as G,az as K,aA as O,r as z,f as J,k as Q,S as W,ag as u,u as i,y as r,z as _,P as l,H as n,A as e,K as p,M as c,G as f,L as d,O as k,a4 as C}from"./vendors-75826026.js";import{_ as X,u as Y}from"./_plugin-vue_export-helper-4c6240b9.js";import{E as P,c as B,f as Z,a as x,d as ee,w as se}from"./element-plus-5e60ac94.js";const te={key:0,class:"recipe-detail"},le={key:0,class:"nutrition-info"},ne={class:"ingredient-quantity"},ie={class:"section-header"},ae={class:"total-time"},oe={class:"time-value"},ce={class:"step-content"},de={class:"step-number"},re=["innerHTML"],ue={key:0,class:"step-tips"},_e={class:"action-buttons"},pe={class:"mobile-pairings-content"},me={class:"current-dish-section"},ge={class:"current-dish-card"},fe={class:"current-dish-info"},he={class:"current-dish-tags"},ve={class:"pairing-reason-section"},ye={class:"reason-title"},ke={class:"reason-grid"},be={class:"reason-item"},$e={class:"reason-item"},we={class:"reason-item"},Re={class:"recommended-dishes-section"},Te={class:"dishes-grid"},Ce=["onClick"],Ve={class:"dish-image-wrapper"},De={class:"dish-content"},ze={class:"dish-meta"},Pe={class:"dish-tags"},Be={class:"cooking-time"},Me={class:"pairing-desc"},Se={class:"mobile-dialog-footer"},Ie={__name:"RecipeDetail",setup(Le){const $=G(),M=K(),m=Y(),{currentRecipe:o,recommendedPairings:S}=O(m),h=z(!1);z([{title:"营养搭配小贴士",content:"荤素搭配不仅可以让饮食更加美味，还能确保营养均衡。主菜提供优质蛋白质，蔬菜补充维生素和膳食纤维。"},{title:"健康饮食建议",content:"建议一餐中荤菜和素菜的比例为3:7，这样既能享受美味，又不会摄入过多油脂。"}]);const V=async s=>{try{if(!s)return;await m.getRecipeById(parseInt(s)),await m.getRecommendedPairings(parseInt(s))}catch(t){P.error(t.message||"获取菜品详情失败")}};J(()=>$.params.id,async s=>{s&&await V(s)});const I=async()=>{h.value=!0},L=s=>{M.push({path:`/recipe/${s}`}),h.value=!1},N=async()=>{try{const s=$.params.id;if(!s)return;await m.getRecommendedPairings(parseInt(s))}catch{P.error("获取搭配推荐失败")}};Q(async()=>{const s=$.params.id;s&&await V(s)}),W(()=>{m.currentRecipe=null,m.recommendedPairings=[]});const j=s=>s===0?"primary":s===o.value.steps.length-1?"success":"normal",D=s=>null,E=s=>(s=s.replace(/(\d+(?:\.\d+)?)\s*(分钟|秒钟|小时|分|秒|h|min|s)/g,'<span class="highlight-time">$1$2</span>'),s=s.replace(/(\d+(?:\.\d+)?)\s*(厘米|毫米|cm|mm|米|m)/g,'<span class="highlight-length">$1$2</span>'),s=s.replace(/(\d+)\s*(度|℃|°C|°F)/g,'<span class="highlight-temp">$1$2</span>'),s=s.replace(/(\d+(?:\.\d+)?)\s*(克|千克|g|kg|公斤|斤|两)/g,'<span class="highlight-weight">$1$2</span>'),s=s.replace(/(\d+(?:\.\d+)?)\s*(ml|毫升|升|L|l|dl|分升)/g,'<span class="highlight-volume">$1$2</span>'),s=s.replace(/(\d+(?:\.\d+)?)\s*(茶匙|勺|汤匙|碗|杯|盘|把|撮|勺子|匙|大勺|小勺|cup|tbsp|tsp)/g,'<span class="highlight-measure">$1$2</span>'),s=s.replace(/(\d+(?:\.\d+)?)\s*(个|只|块|片|颗|粒|根|条|串|包|瓣|节|头|朵|丝|段|张|捆|把|束)/g,'<span class="highlight-quantity">$1$2</span>'),s);return(s,t)=>{const w=u("el-image"),b=u("el-descriptions-item"),H=u("el-descriptions"),R=u("el-card"),v=u("el-tag"),g=u("el-icon"),q=u("el-timeline-item"),A=u("el-timeline"),T=u("el-button"),F=u("el-divider"),U=u("el-dialog");return i(o)?(r(),_("div",te,[l(R,{class:"main-info"},{default:n(()=>[l(w,{src:i(o).image||"/default-food.jpg",fit:"cover",class:"recipe-image"},null,8,["src"]),e("h1",null,c(i(o).name),1),i(o).nutrition?(r(),_("div",le,[l(H,{column:3,border:""},{default:n(()=>[i(o).nutrition.calories?(r(),f(b,{key:0,label:"热量"},{default:n(()=>[d(c(i(o).nutrition.calories),1)]),_:1})):p("",!0),i(o).nutrition.protein?(r(),f(b,{key:1,label:"蛋白质"},{default:n(()=>[d(c(i(o).nutrition.protein),1)]),_:1})):p("",!0),i(o).nutrition.fat?(r(),f(b,{key:2,label:"脂肪"},{default:n(()=>[d(c(i(o).nutrition.fat),1)]),_:1})):p("",!0),i(o).nutrition.carbs?(r(),f(b,{key:3,label:"碳水"},{default:n(()=>[d(c(i(o).nutrition.carbs),1)]),_:1})):p("",!0)]),_:1})])):p("",!0)]),_:1}),l(R,{class:"ingredients-section"},{header:n(()=>t[2]||(t[2]=[e("h3",null,"食材清单",-1)])),default:n(()=>[(r(!0),_(k,null,C(i(o).ingredients,a=>(r(),f(v,{key:a,class:"ingredient-tag"},{default:n(()=>[a.includes("克")||a.includes("g")||a.includes("ml")||a.includes("个")||a.includes("片")?(r(),_(k,{key:0},[e("span",ne,c(a.match(/\d+(\.\d+)?[克gml个片]/)[0]),1),d(" "+c(a.replace(/\d+(\.\d+)?[克gml个片]/,"")),1)],64)):(r(),_(k,{key:1},[d(c(a),1)],64))]),_:2},1024))),128))]),_:1}),l(R,{class:"steps-section"},{header:n(()=>[e("div",ie,[t[4]||(t[4]=e("h3",null,"烹饪步骤",-1)),e("span",ae,[l(g,null,{default:n(()=>[l(i(B))]),_:1}),t[3]||(t[3]=d(" 总耗时：")),e("span",oe,c(i(o).cookingTime),1)])])]),default:n(()=>[l(A,null,{default:n(()=>[(r(!0),_(k,null,C(i(o).steps,(a,y)=>(r(),f(q,{key:y,type:j(y),hollow:y===i(o).steps.length-1,class:"step-item"},{default:n(()=>[e("div",ce,[e("div",de,c(y+1),1),e("div",{class:"step-text",innerHTML:E(a)},null,8,re),D(a)?(r(),_("div",ue,[l(g,null,{default:n(()=>[l(i(se))]),_:1}),d(" "+c(D(a)),1)])):p("",!0)])]),_:2},1032,["type","hollow"]))),128))]),_:1})]),_:1}),e("div",_e,[l(T,{type:"primary",size:"large",onClick:I,class:"pairing-btn"},{default:n(()=>t[5]||(t[5]=[d(" 查看最佳搭配 ")])),_:1})]),l(U,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=a=>h.value=a),title:`${i(o).name}的最佳搭配`,width:"90%",class:"pairings-dialog mobile-dialog",fullscreen:!0},{footer:n(()=>[e("div",Se,[l(T,{onClick:t[0]||(t[0]=a=>h.value=!1),block:""},{default:n(()=>t[14]||(t[14]=[d("关闭")])),_:1}),l(T,{type:"primary",onClick:N,block:""},{default:n(()=>t[15]||(t[15]=[d("换一批搭配")])),_:1})])]),default:n(()=>[e("div",pe,[e("div",me,[e("div",ge,[l(w,{src:i(o).image||"/default-food.jpg",class:"current-dish-image"},null,8,["src"]),e("div",fe,[e("h3",null,c(i(o).name),1),e("div",he,[l(v,{size:"small",effect:"plain",type:"danger"},{default:n(()=>[d(c(i(o).taste),1)]),_:1}),l(v,{size:"small",effect:"plain",type:"warning"},{default:n(()=>[d(c(i(o).cookingMethod),1)]),_:1})])])])]),e("div",ve,[e("div",ye,[l(F,null,{default:n(()=>t[6]||(t[6]=[d("搭配理由")])),_:1})]),e("div",ke,[e("div",be,[l(g,{class:"reason-icon"},{default:n(()=>[l(i(Z))]),_:1}),t[7]||(t[7]=e("h5",null,"营养均衡",-1)),t[8]||(t[8]=e("p",null,"合理搭配荤素",-1))]),e("div",$e,[l(g,{class:"reason-icon"},{default:n(()=>[l(i(x))]),_:1}),t[9]||(t[9]=e("h5",null,"口感互补",-1)),t[10]||(t[10]=e("p",null,"提升饮食体验",-1))]),e("div",we,[l(g,{class:"reason-icon"},{default:n(()=>[l(i(ee))]),_:1}),t[11]||(t[11]=e("h5",null,"健康饮食",-1)),t[12]||(t[12]=e("p",null,"注重荤素比例",-1))])])]),e("div",Re,[t[13]||(t[13]=e("div",{class:"section-title"},[e("h4",null,"推荐搭配")],-1)),e("div",Te,[(r(!0),_(k,null,C(i(S),a=>(r(),_("div",{key:a.id,class:"dish-item",onClick:y=>L(a.id)},[e("div",Ve,[l(w,{src:a.image||"/default-food.jpg",fit:"cover",class:"dish-thumb"},null,8,["src"])]),e("div",De,[e("h5",null,c(a.name),1),e("div",ze,[e("div",Pe,[l(v,{size:"small",effect:"plain"},{default:n(()=>[d(c(a.category),1)]),_:2},1024),l(v,{size:"small",effect:"plain",type:"info"},{default:n(()=>[d(c(a.taste),1)]),_:2},1024)]),e("span",Be,[l(g,null,{default:n(()=>[l(i(B))]),_:1}),d(" "+c(a.cookingTime),1)])]),e("p",Me,c(a.pairingReason),1)])],8,Ce))),128))])])])]),_:1},8,["modelValue","title"])])):p("",!0)}}},He=X(Ie,[["__scopeId","data-v-7a857005"]]);export{He as default};
